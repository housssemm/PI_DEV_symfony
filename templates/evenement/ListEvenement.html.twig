<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<title>Liste des événements</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
		<style>
			.event-card {
				transition: transform 0.2s;
				margin-bottom: 20px;
			}
			.event-card:hover {
				transform: translateY(-5px);
				box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
			}
			.event-image {
				height: 200px;
				object-fit: cover;
			}
		</style>
	</head>
	<body class="bg-light">
		<div class="container py-5">
			<div class="d-flex justify-content-between align-items-center mb-4">
				<h1>Liste des événements</h1>
				<a href="{{ path('app_add_event') }}" class="btn btn-primary">
					<i class="bi bi-plus-circle"></i>
					Ajouter un événement
				</a>
			</div>

			{% for message in app.flashes('success') %}
				<div class="alert alert-success alert-dismissible fade show" role="alert">
					{{ message }}
					<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
				</div>
			{% endfor %}

			{% for message in app.flashes('error') %}
				<div class="alert alert-danger alert-dismissible fade show" role="alert">
					{{ message }}
					<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
				</div>
			{% endfor %}

			<div class="row">
				{% for event in list %}
					<div class="col-md-4">
						<div class="card event-card">
							{% if event.base64Image %}
								<img src="data:image/png;base64,{{ event.base64Image }}" class="card-img-top event-image" alt="Event image">
							{% else %}
								<div class="card-img-top event-image bg-secondary d-flex align-items-center justify-content-center text-white">
									Pas d'image
								</div>
							{% endif %}
							<div class="card-body">
								<h5 class="card-title">{{ event.titre }}</h5>
								<p class="card-text">{{ event.description }}</p>
								<ul class="list-unstyled">
									<li>
										<strong>Date Début:</strong>
										{{ event.dateDebut ? event.dateDebut|date('Y-m-d') : 'N/A' }}</li>
									<li>
										<strong>Date Fin:</strong>
										{{ event.dateFin ? event.dateFin|date('Y-m-d') : 'N/A' }}</li>
									<li>
										<strong>Lieu:</strong>
										{{ event.lieu }}</li>
									<li>
										<strong>Etat:</strong>
										{{ event.etat }}</li>
									<li>
										<strong>Prix:</strong>
										{{ event.prix }}</li>
									<li>
										<strong>Type:</strong>
										{{ event.type }}</li>
									<li>
										<strong>Organisateur:</strong>
										{{ event.organisateur }}</li>
									<li>
										<strong>Capacité:</strong>
										{{ event.capaciteMaximale }}</li>
								</ul>
								<div class="mt-3 d-flex gap-2">
									<a href="{{ path('app_update_event', { 'id': event.id }) }}" class="btn btn-primary">Modifier</a>
									<a href="{{ path('app_delete', { 'id': event.id }) }}" class="btn btn-danger" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cet événement ?')">Supprimer</a>
								</div>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	</body>
</html>
