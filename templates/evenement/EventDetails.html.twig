{% extends 'base.html.twig' %}

{% block title %}Détails de l'événement
{% endblock %}

{% block css %}
	{{ parent() }}
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
	<style>
		body {
			background: #151515;
			color: #e2e8f0;
		}

		.container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 0 20px;
		}

		.page-title {
			font-size: 2.25rem;
			font-weight: 700;
			margin-bottom: 2rem;
			color: #f8fafc;
			text-align: center;
			text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
		}

		.event-card {
			background: #1e293b;
			border-radius: 1rem;
			overflow: hidden;
			box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.3);
			border: 1px solid rgba(255, 255, 255, 0.1);
		}

		.event-image-container {
			width: 100%;
			height: 400px;
			overflow: hidden;
			position: relative;
		}

		.event-image {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		.event-image-placeholder {
			width: 100%;
			height: 100%;
			background: #0f172a;
			display: flex;
			align-items: center;
			justify-content: center;
			color: #64748b;
			font-size: 4rem;
		}

		.event-content {
			padding: 2rem;
		}

		.event-title {
			font-size: 2rem;
			font-weight: 700;
			color: #f8fafc;
			margin-bottom: 1rem;
			display: flex;
			align-items: center;
			gap: 1rem;
		}

		.event-title i {
			color: #3b82f6;
			font-size: 2.5rem;
		}

		.event-description {
			color: #94a3b8;
			font-size: 1.1rem;
			line-height: 1.6;
			margin-bottom: 2rem;
			display: flex;
			gap: 1rem;
		}

		.event-description i {
			color: #3b82f6;
			font-size: 1.5rem;
			margin-top: 0.25rem;
		}

		.event-details {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
			gap: 1.5rem;
			margin-bottom: 2rem;
		}

		.event-detail {
			display: flex;
			align-items: center;
			gap: 1rem;
			color: #e2e8f0;
			font-size: 1.1rem;
			padding: 1rem;
			background: #0f172a;
			border-radius: 0.75rem;
			border: 1px solid rgba(255, 255, 255, 0.1);
			transition: all 0.3s ease;
		}

		.event-detail:hover {
			transform: translateY(-0.125rem);
			background: #1e293b;
			border-color: rgba(255, 255, 255, 0.2);
		}

		.event-detail i {
			color: #3b82f6;
			font-size: 1.5rem;
			background: rgba(59, 130, 246, 0.1);
			padding: 0.75rem;
			border-radius: 0.5rem;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.event-detail span {
			flex: 1;
		}

		.status-badge {
			padding: 0.5rem 1rem;
			border-radius: 2rem;
			font-weight: 600;
			font-size: 0.875rem;
			text-transform: uppercase;
			letter-spacing: 0.025rem;
		}

		.status-active {
			background: rgba(34, 197, 94, 0.1);
			color: #22c55e;
			border: 1px solid rgba(34, 197, 94, 0.2);
		}

		.status-expired {
			background: rgba(239, 68, 68, 0.1);
			color: #ef4444;
			border: 1px solid rgba(239, 68, 68, 0.2);
		}

		.event-actions {
			display: flex;
			gap: 1rem;
			margin-top: 2rem;
		}

		.btn {
			padding: 0.75rem 1.5rem;
			border-radius: 0.5rem;
			font-weight: 600;
			text-transform: uppercase;
			letter-spacing: 0.025rem;
			display: flex;
			align-items: center;
			gap: 0.5rem;
			transition: all 0.3s ease;
		}

		.btn-view {
			background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
			color: white;
			border: none;
		}

		.btn-view:hover {
			transform: translateY(-0.125rem);
			box-shadow: 0 0.5rem 1.25rem rgba(59, 130, 246, 0.3);
			color: white;
			background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
		}

		.btn-edit {
			background: #1e293b;
			border: 1px solid rgba(255, 255, 255, 0.1);
			color: #e2e8f0;
		}

		.btn-edit:hover {
			background: #2d3748;
			color: #e2e8f0;
			border-color: rgba(255, 255, 255, 0.2);
		}

		.btn-delete {
			background: rgba(239, 68, 68, 0.1);
			border: 1px solid rgba(239, 68, 68, 0.2);
			color: #ef4444;
		}

		.btn-delete:hover {
			background: rgba(239, 68, 68, 0.2);
			color: #ef4444;
			border-color: rgba(239, 68, 68, 0.3);
		}

		@media(max-width: 768px) {
			.event-image-container {
				height: 300px;
			}

			.event-content {
				padding: 1.5rem;
			}

			.event-title {
				font-size: 1.75rem;
			}

			.event-actions {
				flex-direction: column;
			}

			.btn {
				width: 100%;
				justify-content: center;
			}

			.event-detail {
				padding: 0.75rem;
			}

			.event-detail i {
				font-size: 1.25rem;
				padding: 0.5rem;
			}
		}
	</style>
{% endblock %}

{% block body %}
	<div class="container">
		<h1 class="page-title">Détails de l'événement</h1>

		<div class="event-card">
			<div class="event-image-container">
				{% if event.base64Image %}
					<img src="data:image/png;base64,{{ event.base64Image }}" class="event-image" alt="Event image">
				{% else %}
					<div class="event-image-placeholder">
						<i class="bi bi-image"></i>
					</div>
				{% endif %}
			</div>

			<div class="event-content">
				<h2 class="event-title">
					<i class="bi bi-calendar-event"></i>
					{{ event.titre }}
				</h2>
				<p class="event-description">
					<i class="bi bi-card-text"></i>
					{{ event.description }}
				</p>

				<div class="event-details">
					<div class="event-detail">
						<i class="bi bi-calendar-event"></i>
						<span>Date de début:
							{{ event.dateDebut ? event.dateDebut|date('Y-m-d') : 'N/A' }}</span>
					</div>
					<div class="event-detail">
						<i class="bi bi-calendar-check"></i>
						<span>Date de fin:
							{{ event.dateFin ? event.dateFin|date('Y-m-d') : 'N/A' }}</span>
					</div>
					<div class="event-detail">
						<i class="bi bi-geo-alt"></i>
						<span>Lieu:
							{{ event.lieu }}</span>
					</div>
					<div class="event-detail">
						<i class="bi bi-tag"></i>
						<span>Prix:
							{{ event.prix }}
							DT</span>
					</div>
					<div class="event-detail">
						<i class="bi bi-people"></i>
						<span>Organisateur:
							{{ event.organisateur }}</span>
					</div>
					<div class="event-detail">
						<i class="bi bi-person-badge"></i>
						<span>Capacité maximale:
							{{ event.capaciteMaximale }}
							personnes</span>
					</div>
					<div class="event-detail">
						<i class="bi bi-info-circle"></i>
						<span>Type:
							{{ event.type }}</span>
					</div>
					<div class="event-detail">
						<i class="bi bi-circle-fill"></i>
						<span class="status-badge {% if event.etat == 'ACTIF' %}status-active{% else %}status-expired{% endif %}">
							{{ event.etat }}
						</span>
					</div>
				</div>

				<div class="event-actions">
					<a href="{{ path('app_events') }}" class="btn btn-view">
						<i class="bi bi-arrow-left"></i>
						Retour à la liste
					</a>
					<a href="{{ path('app_update_event', {'id': event.id}) }}" class="btn btn-edit">
						<i class="bi bi-pencil"></i>
						Modifier
					</a>
					<form method="post" action="{{ path('app_delete', {'id': event.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet événement ?');" style="display: inline;">
						<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ event.id) }}">
						<button type="submit" class="btn btn-delete">
							<i class="bi bi-trash"></i>
							Supprimer
						</button>
					</form>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
